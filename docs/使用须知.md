# NetMate 使用须知

## WiFi 自动重连说明

### 首次连接要求（Windows）

**NetMate的WiFi自动重连功能需要在Windows系统中已保存的WiFi配置文件。**

#### 为什么需要手动连接一次？

Windows系统的WiFi配置文件包含以下信息：
- SSID（WiFi名称）
- 加密方式（WPA2、WPA3等）
- 密码（加密存储）
- 网络认证协议（SAE、PSK等）

不同的WiFi路由器可能使用不同的加密方式：
- **WPA2-个人**：传统加密方式
- **WPA3-个人**：新一代更安全的加密协议
- **WPA3/WPA2混合模式**：同时支持两种方式

**Windows命令行工具（netsh）无法自动创建正确的WiFi配置文件**，特别是对于使用WPA3加密的WiFi。只有Windows图形界面能够正确协商加密方式并保存配置。

#### 解决方案

**首次使用前，请在Windows系统中手动连接一次WiFi：**

1. 打开 Windows 设置 → 网络和Internet → WiFi
2. 找到目标WiFi网络，点击"连接"
3. 输入WiFi密码
4. 连接成功后，Windows会自动保存配置

**之后，NetMate就可以正常使用该WiFi配置进行自动重连了。**

#### 技术实现

NetMate使用Windows已保存的WiFi配置文件进行连接：

```bash
# 检查配置文件是否存在
netsh wlan show profile name="WiFi名称"

# 使用已保存的配置连接
netsh wlan connect name="WiFi名称"
```

这种方式：
- ✅ 保留Windows协商的所有加密设置（WPA2/WPA3）
- ✅ 支持所有加密方式
- ✅ 兼容性最好
- ❌ 需要手动连接一次创建配置文件

### macOS 和 Linux

macOS和Linux平台支持直接使用SSID和密码连接WiFi，无需手动连接。

- **macOS**: 使用 `networksetup -setairportnetwork` 命令
- **Linux**: 使用 `nmcli dev wifi connect` 命令

### 如何查看WiFi加密方式（Windows）

在PowerShell中运行：

```powershell
netsh wlan show profile name="你的WiFi名称" key=clear
```

查看"安全设置"部分：

```
安全设置
-----------------
    身份验证         : WPA3 - 个人      ← WPA3加密
    密码             : GCMP-256
    身份验证         : WPA2 - 个人      ← 同时支持WPA2
    密码             : CCMP
```

或者：

```
安全设置
-----------------
    身份验证         : WPA2 - 个人      ← 纯WPA2加密
    加密             : CCMP
```

---

## 常见问题

### Q: 为什么应用不能自动创建WiFi配置？

A: Windows的 `netsh wlan` 命令工具对现代WiFi加密协议（特别是WPA3）的支持非常有限。即使尝试自动创建配置文件，也可能因为加密方式不匹配导致连接失败。只有Windows图形界面能够完整支持所有加密方式的自动协商。

### Q: 手动连接一次后，配置会一直保留吗？

A: 是的。除非你在Windows中手动删除该WiFi配置，或者使用"忘记此网络"功能，否则配置会一直保留。

### Q: 如果我的WiFi只用WPA2，还需要手动连接吗？

A: 是的，仍然需要。虽然理论上可以通过命令创建WPA2配置文件，但实践中发现存在字符编码、参数兼容性等各种问题，导致可靠性很低。手动连接一次是最稳定的方案。

### Q: 我更换了WiFi密码怎么办？

A: 在Windows中重新连接一次WiFi，输入新密码，Windows会自动更新配置文件。之后NetMate会使用新的配置。

### Q: macOS和Linux也需要手动连接一次吗？

A: 不需要。macOS和Linux的网络管理工具支持直接使用SSID和密码连接，无需预先保存配置。

---

## 其他注意事项

### 网络状态检测

- 应用每3秒检测一次WiFi连接状态
- WiFi断开后，会等待2秒后自动尝试重连
- 重连成功后，会等待3秒让网络稳定，然后更新状态

### 日志查看

- **应用内日志**：在"运行日志"页面查看简洁的操作记录
- **错误提示**：如果WiFi配置文件不存在，应用会提示需要手动连接

### 中文WiFi名称支持

目前应用对中文SSID的支持有限，可能会遇到编码问题。建议：
- 优先使用英文或数字作为WiFi名称
- 如果必须使用中文SSID，请确保已在Windows中手动连接过

---

*最后更新: 2026-01-04*
